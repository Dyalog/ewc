 eWC_init_loader path;g
⍝ load the tools we need
 #.DEFAULTS←0(⎕JSON⍠'Dialect' 'JSON5')(1⊃⎕NGET ##.TESTSOURCE,'eWC_defaults.json5')

 :If 9=#.⎕NC'tests'
     {}⎕SE.Link.Break #.tests
     #.⎕EX'tests'
 :EndIf
 :If 9=#.⎕NC'demo'
     {}⎕SE.Link.Break #.demo
     #.⎕EX'demo'
 :EndIf
 :If ~##.quiet
     LINK←{⍺←'NADA'
         ⍺≡'NADA':⎕SE.Link.Create ⍵
         ⍺ ⎕SE.Link.Create ⍵}
     IMPORT←{⍺←'NADA'
         ⍺≡'NADA':⎕SE.Link.Import ⍵
         ⍺ ⎕SE.Link.Import ⍵}
 :Else
     LINK←{⍺←'NADA'
         ⍺≡'NADA':sink←⎕SE.Link.Create ⍵
         sink←⍺ ⎕SE.Link.Create ⍵}
     IMPORT←{⍺←'NADA'
         ⍺≡'NADA':sink←⎕SE.Link.Import ⍵
         sink←⍺ ⎕SE.Link.Import ⍵}
 :EndIf

 #.⎕EX'APLProcess'
 IMPORT #'APLProcess'

 EWC_HOME←1⊃1 ⎕NPARTS ##.TESTSOURCE,'../'       ⍝ intentionally global!
 EWC_DPATH←∊1 ⎕NPARTS EWC_HOME,'demo'               ⍝ intentionally global!
 
 '#.tests'⎕NS''
 '#.demo'⎕NS''

 :If _Env'DEVMODE'
     LINK #.tests(path,'/tests')
     LIKN #.demo EWC_DPATH   ⍝ load all demos
 :Else
     IMPORT #.tests(path,'/tests')
     IMPORT #.demo EWC_DPATH   ⍝ load all demos
 :EndIf

 #.S←#.tests.Selenium.Selenium
 #.S.QUIETMODE←##.quiet
 #.S.HOME←EWC_HOME,'Tests/Selenium/'
 CMD_SRV_SUFFIX←''    ⍝ will be appened to the command line used to launch the server

 ⍝3 ⎕NDELETE⍠1⊢EWC_DPATH,'*.png'
 ⍝3 ⎕NDELETE⍠1⊢EWC_DPATH,'*.log'
