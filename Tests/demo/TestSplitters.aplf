 r←TestSplitters sink;⎕TRAP;status;s1;s2;p2;p2∆;t;step;t∆;s;splitter;loc;loc∆;p1;ids;splitters;exp;sid;z;act
⍝ waiting for a fix of #152:  The div element created for a splitter should also have an id attribute (matching the one used when creating the control)
 r←''

 status←#.S.Find sid←'F1.RIGHT.TOP.Average'
 :If 326 Check ⎕DR status
     r,←⊂'Could not find field "',sid,'"' ⋄ →0 ⋄ :EndIf
 ids←'F1.SPLIT' 'F1.RIGHT.SPLIT'
 splitters←#.S.Find¨ids
 :If 1 1 Check z←326 326=⎕DR¨splitters
     r,←⊂'Could not find field',((1<+/~z)/'s'),' ',¯2↓∊{'"',⍵,'", '}¨(~z)/ids ⋄ →0 ⋄ :EndIf


 :For s :In ⍳2
     :For step :In 5 7 11 20  ⍝ try several step sizes...
         splitter←splitters[s]
         loc←splitter.Location.(X Y)
         splitter.Click  ⍝ to trigger an update of the status field
         :If loc Check splitter.Location.(X Y)
             r,←←⊂'Clicking splitter "',(s⊃ids),'" affected its location' ⋄ :EndIf

         status #.S.WaitFor'X:'
         t∆←status.Text
         :If 1 Check 1⊃'X:'⍷t∆
             r,←⊂'Status text does not seem to show coordinates' ⋄ :EndIf

         splitter #.S.DragAndDropToOffset(s⌽0 step)
         loc∆←splitter.Location.(X Y)
         :If (exp←loc+s⌽0 step+0 2)Check loc∆
             r,←⊂'Location of splitter "',(s⊃ids),'" was not = ',(⍕exp),', but ',(⍕loc∆),' after moving splitter "',(s⊃ids),'" +',(s⌽0 step),' from position ',⍕loc ⋄ :EndIf

         ⎕DL 1⍝ give it a moment to update the coordinates...
         t←status.Text
         :If (exp←loc∆[s]-1)Check act←s⊃⌽1 0 1/3↑2↓2⊃'XYWH:'⎕VFI t
             r,←⊂'Actual and displayed locations of  splitter "',(s⊃ids),'"do not match: ',(⍕exp),' vs. ',⍕act ⋄ :EndIf
⍝ get the first 2 numbers and compare to loc∆


     :EndFor
 :EndFor


⍝ resize form??? has no effect with html...
